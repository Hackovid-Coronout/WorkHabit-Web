<html>
<head>
    <title>WorkHabit</title>
    <meta charset="UTF-8">
    <meta name="description" content="Aplicació amb consells per teletreballar més saludablement">
    <meta name="author" content="Hackovid-052-coronout">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="apple-touch-icon" sizes="57x57" href="./img/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="./img/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="./img/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="./img/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="./img/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="./img/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="./img/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="./img/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./img/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="./img/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="./img/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./img/favicon-16x16.png">
    <link rel="shortcut icon" href="./favicon.ico">
    <link rel="manifest" href="./manifest.json">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="msapplication-TileImage" content="./img/ms-icon-144x144.png">
    <meta name="theme-color" content="#000000">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js" integrity="sha256-4iQZ6BVL4qNKlQ27TExEhBN1HFPvAvAMbFavKKosSWQ=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/locale/ca.js" integrity="sha256-NPnuFvS1oYkm3cZVq776l59xkaYkS+8ZRfK7uwbd70g=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gijgo/1.9.13/combined/js/gijgo.min.js" integrity="sha256-YZhUu69bCn9uTqQyKwwQ3GyRypS7eaxp/wmVS282sDI=" crossorigin="anonymous"></script>
    <script src="./js/gijgo.es-ca.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gijgo/1.9.13/combined/css/gijgo.min.css" integrity="sha256-bH0WSMuCFoG/dxeox/5aOWmaZl729yDg4ylckwSRTfU=" crossorigin="anonymous" />

    <script src="./js/utils.js"></script>
    <script src="./js/bd.js"></script>
    <script src="./js/msg.js"></script>

    <style>
        .btn-secondary:not(:disabled):not(.disabled).active, .btn-secondary:not(:disabled):not(.disabled):active, .show>.btn-secondary.dropdown-toggle
        {
            background-color: #66CC00;
            border-color: #66CC00;
        }
    </style>
</head>
<body>
<header>
    <div class="collapse bg-dark" id="navbarHeader">
        <div class="container">
            <div class="row">
                <div class="col-sm-8 col-md-7 py-4">
                    <h4 class="text-white">WorkHabit</h4>
                    <p class="text-muted">WorkHabit és una aplicació que proporciona consells perquè les persones que fem Teletreball tinguem una millor experiència i no perdem hàbits saludables. Des de pauses per descansar fins a pauses per fer estiraments seran els missatges que et proporcionarà l'aplicació de forma intel·ligent acontant el teu horari laboral. Gaudeix del teletreball amb WorkHabit.</p>
                </div>
                <div class="col-sm-4 offset-md-1 py-4">
                    <h4 class="text-white">Contacta'ns</h4>
                    <ul class="list-unstyled">
                        <li><a href="mailto:suport@workhabit.cat" class="text-white">Suport</a></li>
                        <li><a href="#" class="text-white">Facebook</a></li>
                        <li><a href="#" class="text-white">Twitter</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="navbar navbar-dark bg-dark shadow-sm">
        <div class="container d-flex justify-content-between">
            <a href="#" class="navbar-brand d-flex align-items-center">
                <img src="./img/logo-negatiu-workhabit.png" height="30"/>
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarHeader" aria-controls="navbarHeader" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </div>
</header>

<main role="main">

    <section class="jumbotron text-center">
        <div class="container">
            <h1>Treballa saludablement</h1>
            <p class="lead text-muted">Aplicació amb consells per teletreballar més saludablement</p>
            <p>
                <a href="#" class="btn btn-primary my-2" data-toggle="modal" data-target="#configModal">Configuració</a>
                <a href="#" class="btn btn-secondary my-2">Borrar configuració</a>
            </p>
        </div>
    </section>

    <div class="album py-5 bg-light">
        <div class="container">

            <div class="row">
                <div class="col-md-4">
                    <div class="card mb-4 shadow-sm">
                        <img src="./img/people-exercise-fit-fitness.jpg" style="width:100%;" alt="Fes exercici"/>
                        <div class="card-body">
                            <p class="card-text">Fes exercici</p>
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="btn-group">
                                    <button id="btnExercici" type="button" class="btn btn-sm btn-outline-secondary">Veure</button>
                                </div>
                                <!--<small class="text-muted">9 mins</small>-->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card mb-4 shadow-sm">
                        <img src="./img/phone-call.jpg" style="width:100%;" alt="Truca a família i amics"/>
                        <div class="card-body">
                            <p class="card-text">Truca a família i amics</p>
                            <div class="d-flex justify-content-between align-items-center">
                                <!--<div class="btn-group">
                                    <button type="button" class="btn btn-sm btn-outline-secondary">View</button>
                                </div>-->
                                <!--<small class="text-muted">9 mins</small>-->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card mb-4 shadow-sm">
                        <img src="./img/work-productivity.jpg" style="width:100%;" alt="Truca a família i amics"/>
                        <div class="card-body">
                            <p class="card-text">Concentra't, WorkHabit t'avisa quan has de parar.</p>
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="btn-group">
                                    <button type="button" class="btn btn-sm btn-outline-secondary">Configura</button>
                                </div>
                                <!--<small class="text-muted">9 mins</small>-->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Config -->
    <div class="modal fade" id="configModal" tabindex="-1" data-backdrop="static" role="dialog" aria-labelledby="configModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document" style="max-width: 1024px;">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="configModalLabel">Configuració</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-2 col-md-2">
                            <label for="dataNaixement">Data naixement</label>
                        </div>
                        <div class="col-sm-4 col-md-4">
                            <input id="dataNaixement" type="text">
                        </div>
                    </div>
                    <h6>Horari laboral:</h6>
                    <div class="row"> <!-- dilluns -->
                        <div class="col-sm-2 col-md-2">
                            <div class="btn-group-toggle col-sm-12 col-md-12" data-toggle="buttons">
                                <label class="btn btn-secondary active col-sm-12 col-md-12">
                                    <input id="dia1" type="checkbox" checked> Dilluns
                                </label>
                            </div>
                        </div>
                        <div class="col-sm-10 col-md-10">
                            <div class="row">
                                <div class="col-sm-2 col-md-2">
                                    <input dia="1" hora="1" id="dia1-h1" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                                <div class="col-sm-1 col-md-1">
                                    <p align="center">-</p>
                                </div>
                                <div class="col-sm-2 col-md-2">
                                    <input dia="1" hora="2" id="dia1-h2" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                                <div class="col-sm-1 col-md-1">

                                </div>
                                <div class="col-sm-2 col-md-2">
                                    <input dia="1" hora="3" id="dia1-h3" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                                <div class="col-sm-1 col-md-1">
                                    <p align="center">-</p>
                                </div>
                                <div class="col-sm-2 col-md-2">
                                    <input dia="1" hora="4" id="dia1-h4" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row"> <!-- dimarts -->
                        <div class="col-sm-2 col-md-2">
                            <div class="btn-group-toggle col-sm-12 col-md-12" data-toggle="buttons">
                                <label class="btn btn-secondary active col-sm-12 col-md-12">
                                    <input id="dia2" type="checkbox" checked> Dimarts
                                </label>
                            </div>
                        </div>
                        <div class="col-sm-10 col-md-10">
                            <div class="row">
                                <div class="col-sm-2 col-md-2">
                                    <input dia="2" hora="1" id="dia2-h1" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                                <div class="col-sm-1 col-md-1">
                                    <p align="center">-</p>
                                </div>
                                <div class="col-sm-2 col-md-2">
                                    <input dia="2" hora="2" id="dia2-h2" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                                <div class="col-sm-1 col-md-1">

                                </div>
                                <div class="col-sm-2 col-md-2">
                                    <input dia="2" hora="3" id="dia2-h3" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                                <div class="col-sm-1 col-md-1">
                                    <p align="center">-</p>
                                </div>
                                <div class="col-sm-2 col-md-2">
                                    <input dia="2" hora="4" id="dia2-h4" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row"> <!-- dimecres -->
                        <div class="col-sm-2 col-md-2">
                            <div class="btn-group-toggle col-sm-12 col-md-12" data-toggle="buttons">
                                <label class="btn btn-secondary active col-sm-12 col-md-12">
                                    <input id="dia3" type="checkbox" checked> Dimecres
                                </label>
                            </div>
                        </div>
                        <div class="col-sm-10 col-md-10">
                            <div class="row">
                                <div class="col-sm-2 col-md-2">
                                    <input dia="3" hora="1" id="dia3-h1" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                                <div class="col-sm-1 col-md-1">
                                    <p align="center">-</p>
                                </div>
                                <div class="col-sm-2 col-md-2">
                                    <input dia="3" hora="2" id="dia3-h2" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                                <div class="col-sm-1 col-md-1">

                                </div>
                                <div class="col-sm-2 col-md-2">
                                    <input dia="3" hora="3" id="dia3-h3" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                                <div class="col-sm-1 col-md-1">
                                    <p align="center">-</p>
                                </div>
                                <div class="col-sm-2 col-md-2">
                                    <input dia="3" hora="4" id="dia3-h4" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row"> <!-- dijous -->
                        <div class="col-sm-2 col-md-2">
                            <div class="btn-group-toggle col-sm-12 col-md-12" data-toggle="buttons">
                                <label class="btn btn-secondary active col-sm-12 col-md-12">
                                    <input id="dia4" type="checkbox" checked> Dijous
                                </label>
                            </div>
                        </div>
                        <div class="col-sm-10 col-md-10">
                            <div class="row">
                                <div class="col-sm-2 col-md-2">
                                    <input dia="4" hora="1" id="dia4-h1" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                                <div class="col-sm-1 col-md-1">
                                    <p align="center">-</p>
                                </div>
                                <div class="col-sm-2 col-md-2">
                                    <input dia="4" hora="2" id="dia4-h2" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                                <div class="col-sm-1 col-md-1">

                                </div>
                                <div class="col-sm-2 col-md-2">
                                    <input dia="4" hora="3" id="dia4-h3" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                                <div class="col-sm-1 col-md-1">
                                    <p align="center">-</p>
                                </div>
                                <div class="col-sm-2 col-md-2">
                                    <input dia="4" hora="4" id="dia4-h4" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row"> <!-- divendres -->
                        <div class="col-sm-2 col-md-2">
                            <div class="btn-group-toggle col-sm-12 col-md-12" data-toggle="buttons">
                                <label class="btn btn-secondary active col-sm-12 col-md-12">
                                    <input id="dia5" type="checkbox" checked> Divendres
                                </label>
                            </div>
                        </div>
                        <div class="col-sm-10 col-md-10">
                            <div class="row">
                                <div class="col-sm-2 col-md-2">
                                    <input dia="5" hora="1" id="dia5-h1" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                                <div class="col-sm-1 col-md-1">
                                    <p align="center">-</p>
                                </div>
                                <div class="col-sm-2 col-md-2">
                                    <input dia="5" hora="2" id="dia5-h2" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                                <div class="col-sm-1 col-md-1">

                                </div>
                                <div class="col-sm-2 col-md-2">
                                    <input dia="5" hora="3" id="dia5-h3" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                                <div class="col-sm-1 col-md-1">
                                    <p align="center">-</p>
                                </div>
                                <div class="col-sm-2 col-md-2">
                                    <input dia="5" hora="4" id="dia5-h4" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row"> <!-- dissabte -->
                        <div class="col-sm-2 col-md-2">
                            <div class="btn-group-toggle col-sm-12 col-md-12" data-toggle="buttons">
                                <label class="btn btn-secondary active col-sm-12 col-md-12">
                                    <input id="dia6" type="checkbox"> Dissabte
                                </label>
                            </div>
                        </div>
                        <div class="col-sm-10 col-md-10">
                            <div class="row">
                                <div class="col-sm-2 col-md-2">
                                    <input dia="6" hora="1" id="dia6-h1" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                                <div class="col-sm-1 col-md-1">
                                    <p align="center">-</p>
                                </div>
                                <div class="col-sm-2 col-md-2">
                                    <input dia="6" hora="2" id="dia6-h2" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                                <div class="col-sm-1 col-md-1">

                                </div>
                                <div class="col-sm-2 col-md-2">
                                    <input dia="6" hora="3" id="dia6-h3" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                                <div class="col-sm-1 col-md-1">
                                    <p align="center">-</p>
                                </div>
                                <div class="col-sm-2 col-md-2">
                                    <input dia="6" hora="4" id="dia6-h4" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row"> <!-- diumenge -->
                        <div class="col-sm-2 col-md-2">
                            <div class="btn-group-toggle col-sm-12 col-md-12" data-toggle="buttons">
                                <label class="btn btn-secondary active col-sm-12 col-md-12">
                                    <input id="dia7" type="checkbox"> Diumenge
                                </label>
                            </div>
                        </div>
                        <div class="col-sm-10 col-md-10">
                            <div class="row">
                                <div class="col-sm-2 col-md-2">
                                    <input dia="7" hora="1" id="dia7-h1" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                                <div class="col-sm-1 col-md-1">
                                    <p align="center">-</p>
                                </div>
                                <div class="col-sm-2 col-md-2">
                                    <input dia="7" hora="2" id="dia7-h2" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                                <div class="col-sm-1 col-md-1">

                                </div>
                                <div class="col-sm-2 col-md-2">
                                    <input dia="7" hora="3" id="dia7-h3" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                                <div class="col-sm-1 col-md-1">
                                    <p align="center">-</p>
                                </div>
                                <div class="col-sm-2 col-md-2">
                                    <input dia="7" hora="4" id="dia7-h4" type="text" class="selectorHora form-control col-sm-12 col-md-12"/>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button id="btnTancar" type="button" class="btn btn-secondary" data-dismiss="modal">Tanca</button>
                    <button id="btnGuardarConfig" type="button" class="btn btn-primary">Guarda configuració</button>
                </div>
            </div>
        </div>
    </div>

</main>

<footer class="text-muted">
    <div class="container">
        <p class="float-right">
            <!--<a href="#">A dalt</a>-->
        </p>
    </div>
</footer>

<script>
    let bbdd = new bd();

    $('.selectorHora').each(function() {
        $(this).timepicker({
            uiLibrary: 'bootstrap4',
            size: 'small'
        });
    });
    $('#dataNaixement').datepicker({
        uiLibrary: 'bootstrap4',
        format: 'dd/mm/yyyy',
        locale: 'es-ca',
        weekStartDay: 1
    });

    function resetPantallaConfig()
    {
        for (d=1; d<=7; d++) {
            for (h = 1; h <= 4; h++) {
                if (h <= 2) {
                    $("#dia" + d + "-h" + h).val("");
                } else {
                    $("#dia" + d + "-h" + h).val("");
                }
            }
        }
    }

    function carregaConfig()
    {
        resetPantallaConfig();
        let conf = bbdd.getConfig();
        $("#dataNaixement").val(conf.dataNaixement);
        let horari = conf.horari;
        for (d=0; d < horari.length; d++)
        {
            dia = d + 1;
            tram = 1;
            if (horari[d].length)
            {
                for (t=0; t < horari[d].length; t++)
                {
                    $("#dia" + dia + "-h" + ((t*2)+1)).val(horari[d][t][0]);
                    $("#dia" + dia + "-h" + ((t*2)+2)).val(horari[d][t][1]);
                }
            }
        }
    }
    carregaConfig();

    $("#btnExercici").on('click', function(e) { window.open('https://www.youtube.com/results?search_query=exercicis+relaxaci%C3%B3')} );

    $(".selectorHora").on("change", function(e) {
        let dia = $(this).attr("dia");
        let hora = $(this).attr("hora");
        let valor = $(this).val();
        $(".selectorHora").each(function() {
            if ($("#dia" + $(this).attr("dia")).is(":checked")) {
                if ($(this).attr("hora") == hora && $(this).val() == "") $(this).val(valor);
            }
        });
    });

    $("#btnTancar").on('click', function (e) {
        carregaConfig();
    });
    $("#btnGuardarConfig").on('click', function (e) {
        let horari = [];
        for (d=1; d<=7; d++)
        {
            let tram1 = [];
            let tram2 = [];
            for (h=1; h<=4; h++)
            {
                if (h<=2)
                {
                    tram1.push($("#dia" + d + "-h" + h).val());
                } else {
                    tram2.push($("#dia" + d + "-h" + h).val());
                }
            }
            let dia = [];
            if (tram1.length == 2) dia.push(tram1);
            if (tram2.length == 2) dia.push(tram2);
            horari.push(dia);
        }
        jsonToSave = {
            "dataNaixement": $("#dataNaixement").val(),
            "horari": horari
        };
        bbdd.guarda(jsonToSave);
        bbdd = new bd();
        $('#configModal').modal('toggle');
    });

    let Messenger = new msg();

    function checkMessage()
    {
        bbdd = new bd();
        let config = bbdd.getConfig();
        Messenger.setConfig(config);
        Messenger.check();
    }

    setTimeout(function(){
        checkMessage()
    }, 60000);
</script>

</body>
</html>